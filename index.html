<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/slick.css" rel="stylesheet" type="text/css">
    <link href="css/slick-theme.css" rel="stylesheet" type="text/css">
    <link href="css/styles.css" rel="stylesheet">
    <title>Bancat Test</title>
    <script src="https://home.ripley.com.pe/minisitios/home/campanas/bc_repositorio/js/jquery-3.2.1.min.js"></script>
    <script src="https://home.ripley.com.pe/minisitios/home/campanas/bc_repositorio/js/initializer.js"></script>
    <script>
        const data_bancat = async ()=>{
            try {
                let response = await fetch('./list-bc.json');
                let data = await response.json();
                const url_bancat = data.url_bancat;
                /*Listar Banner*/
                let list_banner = '';
                let dataL =data.list_slider[0];
                list_banner=`<a href="${dataL.url}" target="_top">
                                <img class="img-responsive hidden-xs hidden-sm" src="${url_bancat+'img/'+dataL.img_desk}" style="width: 100%;">
                                <img class="img-responsive hidden-lg hidden-md" src="${url_bancat+'img/'+dataL.img_mob}" style="width: 100%;">
                            </a> `
                document.getElementById('banner-principal').innerHTML = list_banner;
                /*Listar de botones*/
                let list_botones = '';
                data.list_btn.forEach(btn => {
                    list_botones +=`<div class="item-btn active">
                                        <a href="${btn.url}" data-seccion="" target="_top">
                                            <div class="item-img">
                                                <img class=" uno" src="${url_bancat+'img/'+btn.imagen}" alt="">
                                                <span class="texto">${btn.nombre}</span>
                                            </div>
                                        </a>
                                    </div>`;
                });
                document.getElementById('content-btns').innerHTML = list_botones;

                let goCarrusel = await config_carrusel(data.cant_btn);
                /**/
            } catch (error) {
                console.log("Error ==> ", error)
            }   
        }
        data_bancat();
    </script>
    <script>
        let config_carrusel =(view_cant_btn)=>{
            console.log(view_cant_btn);
            init([
                'https://home.ripley.com.pe/minisitios/home/campanas/bc_repositorio/js/slick.min.js',
            ], function($, window, document, undefined) {
                $(document).ready(function() {
                    let cant_btns =view_cant_btn;
					cant_btns = (cant_btns >= 7)? 7:cant_btns;
                    //let btn_active = btns.filter(".active").index();
                    let $carrusel = $('#content-btns');
                    $carrusel.slick({
                            dots: false,
                            infinite: false,
                            speed: 300,
                            slidesToShow: cant_btns,
                            slidesToScroll: 1,
                                responsive: [{
                                   breakpoint: 768,
                                   settings: {
                                     dots: false,
                                       infinite: true,
                                   slidesToShow: 3,
                                      slidesToScroll: 2,
                                   }
                              }, ]
                    });
                        //$carrusel.slick('slickGoTo', btn_active);
                        //$carrusel.addClass('active');
                    /*Fin de Carousel*/
                });
            });
        }
            
    </script>
</head>
<body>
    <section id="bc_section">
        <div class="row">
            <div id="banner-principal" class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                
            </div>
        </div>
        <div class="row list-btn">
            <div class="space_btn">
                <div id="content-btns">                
                </div>
            </div>
        </div>
    </section>
</body>
</html>